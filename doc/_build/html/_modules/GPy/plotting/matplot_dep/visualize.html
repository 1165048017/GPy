<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>GPy.plotting.matplot_dep.visualize &mdash; GPy  documentation</title>
    
    <link rel="stylesheet" href="../../../../_static//default.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <link rel="top" title="GPy  documentation" href="../../../../index.html" />
    <link rel="up" title="GPy" href="../../../GPy.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">GPy  documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../../../index.html" >Module code</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="../../../GPy.html" accesskey="U">GPy</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for GPy.plotting.matplot_dep.visualize</h1><div class="highlight"><pre>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">mpl_toolkits.mplot3d</span> <span class="kn">import</span> <span class="n">Axes3D</span>
<span class="kn">import</span> <span class="nn">GPy</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="kn">as</span> <span class="nn">mpl</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">GPy.core.parameterization.variational</span> <span class="kn">import</span> <span class="n">VariationalPosterior</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">visual</span>
    <span class="n">visual_available</span> <span class="o">=</span> <span class="bp">True</span>

<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="n">visual_available</span> <span class="o">=</span> <span class="bp">False</span>


<div class="viewcode-block" id="data_show"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.data_show">[docs]</a><span class="k">class</span> <span class="nc">data_show</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The data_show class is a base class which describes how to visualize a</span>
<span class="sd">    particular data set. For example, motion capture data can be plotted as a</span>
<span class="sd">    stick figure, or images are shown using imshow. This class enables latent</span>
<span class="sd">    to data visualizations for the GP-LVM.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vals</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="c"># If no axes are defined, create some.</span>

<div class="viewcode-block" id="data_show.modify"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.data_show.modify">[docs]</a>    <span class="k">def</span> <span class="nf">modify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">,</span> <span class="s">&quot;this needs to be implemented to use the data_show class&quot;</span>
</div>
<div class="viewcode-block" id="data_show.close"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.data_show.close">[docs]</a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">,</span> <span class="s">&quot;this needs to be implemented to use the data_show class&quot;</span>
</div></div>
<div class="viewcode-block" id="vpython_show"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.vpython_show">[docs]</a><span class="k">class</span> <span class="nc">vpython_show</span><span class="p">(</span><span class="n">data_show</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    the vpython_show class is a base class for all visualization methods that use vpython to display. It is initialized with a scene. If the scene is set to None it creates a scene window.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">,</span> <span class="n">scene</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">data_show</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">)</span>
        <span class="c"># If no axes are defined, create some.</span>

        <span class="k">if</span> <span class="n">scene</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scene</span> <span class="o">=</span> <span class="n">visual</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">&#39;Data Visualization&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scene</span> <span class="o">=</span> <span class="n">scene</span>

<div class="viewcode-block" id="vpython_show.close"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.vpython_show.close">[docs]</a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>


</div></div>
<div class="viewcode-block" id="matplotlib_show"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.matplotlib_show">[docs]</a><span class="k">class</span> <span class="nc">matplotlib_show</span><span class="p">(</span><span class="n">data_show</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    the matplotlib_show class is a base class for all visualization methods that use matplotlib. It is initialized with an axis. If the axis is set to None it creates a figure window.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">data_show</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">)</span>
        <span class="c"># If no axes are defined, create some.</span>

        <span class="k">if</span> <span class="n">axes</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="n">axes</span>

<div class="viewcode-block" id="matplotlib_show.close"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.matplotlib_show.close">[docs]</a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">get_figure</span><span class="p">())</span>
</div></div>
<div class="viewcode-block" id="vector_show"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.vector_show">[docs]</a><span class="k">class</span> <span class="nc">vector_show</span><span class="p">(</span><span class="n">matplotlib_show</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A base visualization class that just shows a data vector as a plot of</span>
<span class="sd">    vector elements alongside their indices.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">matplotlib_show</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">,</span> <span class="n">axes</span><span class="p">)</span>
        <span class="c">#assert vals.ndim == 2, &quot;Please give a vector in [n x 1] to plot&quot;</span>
        <span class="c">#assert vals.shape[1] == 1, &quot;only showing a vector in one dimension&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">handle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">vals</span><span class="o">.</span><span class="n">size</span><span class="p">)[:,</span> <span class="bp">None</span><span class="p">],</span> <span class="n">vals</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

<div class="viewcode-block" id="vector_show.modify"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.vector_show.modify">[docs]</a>    <span class="k">def</span> <span class="nf">modify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vals</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">xdata</span><span class="p">,</span> <span class="n">ydata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">handle</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span>
        <span class="k">assert</span> <span class="n">vals</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="s">&quot;values passed into modify changed size! vals.size:{} != in.size:{}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">vals</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">handle</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">xdata</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

</div></div>
<div class="viewcode-block" id="lvm"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.lvm">[docs]</a><span class="k">class</span> <span class="nc">lvm</span><span class="p">(</span><span class="n">matplotlib_show</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">data_visualize</span><span class="p">,</span> <span class="n">latent_axes</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">sense_axes</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">latent_index</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="n">disable_drag</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Visualize a latent variable model</span>

<span class="sd">        :param model: the latent variable model to visualize.</span>
<span class="sd">        :param data_visualize: the object used to visualize the data which has been modelled.</span>
<span class="sd">        :type data_visualize: visualize.data_show  type.</span>
<span class="sd">        :param latent_axes: the axes where the latent visualization should be plotted.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">vals</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">X</span><span class="p">,</span> <span class="n">VariationalPosterior</span><span class="p">):</span>
                <span class="n">vals</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">X</span><span class="o">.</span><span class="n">mean</span><span class="o">.</span><span class="n">values</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">vals</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">X</span><span class="o">.</span><span class="n">values</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vals</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">vals</span> <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="bp">None</span><span class="p">,:]</span>
        <span class="n">matplotlib_show</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="n">latent_axes</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">latent_axes</span><span class="p">,</span><span class="n">mpl</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">Axes</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cid</span> <span class="o">=</span> <span class="n">latent_axes</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s">&#39;button_press_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_click</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">disable_drag</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cid</span> <span class="o">=</span> <span class="n">latent_axes</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s">&#39;motion_notify_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_move</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cid</span> <span class="o">=</span> <span class="n">latent_axes</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s">&#39;axes_leave_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_leave</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cid</span> <span class="o">=</span> <span class="n">latent_axes</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s">&#39;axes_enter_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_enter</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cid</span> <span class="o">=</span> <span class="n">latent_axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s">&#39;button_press_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_click</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">disable_drag</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cid</span> <span class="o">=</span> <span class="n">latent_axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s">&#39;motion_notify_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_move</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cid</span> <span class="o">=</span> <span class="n">latent_axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s">&#39;axes_leave_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_leave</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cid</span> <span class="o">=</span> <span class="n">latent_axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">mpl_connect</span><span class="p">(</span><span class="s">&#39;axes_enter_event&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">on_enter</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">data_visualize</span> <span class="o">=</span> <span class="n">data_visualize</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">latent_axes</span> <span class="o">=</span> <span class="n">latent_axes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sense_axes</span> <span class="o">=</span> <span class="n">sense_axes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">called</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">move_on</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">latent_index</span> <span class="o">=</span> <span class="n">latent_index</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">latent_dim</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">input_dim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">disable_drag</span> <span class="o">=</span> <span class="n">disable_drag</span>

        <span class="c"># The red cross which shows current latent point.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">latent_values</span> <span class="o">=</span> <span class="n">vals</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">latent_handle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">latent_axes</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">],</span><span class="s">&#39;rx&#39;</span><span class="p">,</span><span class="n">mew</span><span class="o">=</span><span class="mi">2</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span><span class="n">vals</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_sensitivities</span><span class="p">()</span>

<div class="viewcode-block" id="lvm.modify"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.lvm.modify">[docs]</a>    <span class="k">def</span> <span class="nf">modify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;When latent values are modified update the latent representation and ulso update the output visualization.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vals</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_visualize</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">latent_handle</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">latent_index</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">latent_index</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

</div>
<div class="viewcode-block" id="lvm.on_enter"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.lvm.on_enter">[docs]</a>    <span class="k">def</span> <span class="nf">on_enter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">):</span>
        <span class="k">pass</span></div>
<div class="viewcode-block" id="lvm.on_leave"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.lvm.on_leave">[docs]</a>    <span class="k">def</span> <span class="nf">on_leave</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">):</span>
        <span class="k">pass</span>
</div>
<div class="viewcode-block" id="lvm.on_click"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.lvm.on_click">[docs]</a>    <span class="k">def</span> <span class="nf">on_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span><span class="o">!=</span><span class="bp">self</span><span class="o">.</span><span class="n">latent_axes</span><span class="p">:</span> <span class="k">return</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">disable_drag</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">move_on</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">called</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">on_move</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">move_on</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">move_on</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">called</span> <span class="o">=</span> <span class="bp">True</span>
</div>
<div class="viewcode-block" id="lvm.on_move"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.lvm.on_move">[docs]</a>    <span class="k">def</span> <span class="nf">on_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span><span class="o">!=</span><span class="bp">self</span><span class="o">.</span><span class="n">latent_axes</span><span class="p">:</span> <span class="k">return</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">called</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">move_on</span><span class="p">:</span>
            <span class="c"># Call modify code on move</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">latent_values</span><span class="p">[:,</span> <span class="bp">self</span><span class="o">.</span><span class="n">latent_index</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">xdata</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">latent_values</span><span class="p">[:,</span> <span class="bp">self</span><span class="o">.</span><span class="n">latent_index</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">ydata</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">latent_values</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="lvm.show_sensitivities"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.lvm.show_sensitivities">[docs]</a>    <span class="k">def</span> <span class="nf">show_sensitivities</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># A click in the bar chart axis for selection a dimension.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sense_axes</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sense_axes</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sense_axes</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">input_dim</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">input_sensitivity</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;b&#39;</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">latent_index</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">latent_index</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sense_axes</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">latent_index</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">input_sensitivity</span><span class="p">()[</span><span class="bp">self</span><span class="o">.</span><span class="n">latent_index</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;y&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sense_axes</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">latent_index</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">input_sensitivity</span><span class="p">()[</span><span class="bp">self</span><span class="o">.</span><span class="n">latent_index</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;y&#39;</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sense_axes</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">latent_index</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">input_sensitivity</span><span class="p">()[</span><span class="bp">self</span><span class="o">.</span><span class="n">latent_index</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;g&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sense_axes</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">latent_index</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">input_sensitivity</span><span class="p">()[</span><span class="bp">self</span><span class="o">.</span><span class="n">latent_index</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">sense_axes</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

</div></div>
<div class="viewcode-block" id="lvm_subplots"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.lvm_subplots">[docs]</a><span class="k">class</span> <span class="nc">lvm_subplots</span><span class="p">(</span><span class="n">lvm</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    latent_axes is a np array of dimension np.ceil(input_dim/2),</span>
<span class="sd">    one for each pair of the latent dimensions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">,</span> <span class="n">Model</span><span class="p">,</span> <span class="n">data_visualize</span><span class="p">,</span> <span class="n">latent_axes</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">sense_axes</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nplots</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">Model</span><span class="o">.</span><span class="n">input_dim</span><span class="o">/</span><span class="mf">2.</span><span class="p">))</span><span class="o">+</span><span class="mi">1</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">latent_axes</span><span class="p">)</span><span class="o">==</span><span class="bp">self</span><span class="o">.</span><span class="n">nplots</span>
        <span class="k">if</span> <span class="n">vals</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">vals</span> <span class="o">=</span> <span class="n">Model</span><span class="o">.</span><span class="n">X</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">latent_values</span> <span class="o">=</span> <span class="n">vals</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">axis</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">latent_axes</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">nplots</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nplots</span><span class="o">*</span><span class="mi">2</span><span class="o">!=</span><span class="n">Model</span><span class="o">.</span><span class="n">input_dim</span><span class="p">:</span>
                    <span class="n">latent_index</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="n">i</span><span class="o">*</span><span class="mi">2</span><span class="p">]</span>
                <span class="n">lvm</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">latent_vals</span><span class="p">,</span> <span class="n">Model</span><span class="p">,</span> <span class="n">data_visualize</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">sense_axes</span><span class="p">,</span> <span class="n">latent_index</span><span class="o">=</span><span class="n">latent_index</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">latent_index</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="n">i</span><span class="o">*</span><span class="mi">2</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">lvm</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">latent_vals</span><span class="p">,</span> <span class="n">Model</span><span class="p">,</span> <span class="n">data_visualize</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">latent_index</span><span class="o">=</span><span class="n">latent_index</span><span class="p">)</span>


</div>
<div class="viewcode-block" id="lvm_dimselect"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.lvm_dimselect">[docs]</a><span class="k">class</span> <span class="nc">lvm_dimselect</span><span class="p">(</span><span class="n">lvm</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A visualizer for latent variable models which allows selection of the latent dimensions to use by clicking on a bar chart of their length scales.</span>

<span class="sd">    For an example of the visualizer&#39;s use try:</span>

<span class="sd">    GPy.examples.dimensionality_reduction.BGPVLM_oil()</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">data_visualize</span><span class="p">,</span> <span class="n">latent_axes</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">sense_axes</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">latent_index</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">labels</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">latent_axes</span><span class="o">==</span><span class="bp">None</span> <span class="ow">and</span> <span class="n">sense_axes</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="p">,(</span><span class="n">latent_axes</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">sense_axes</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">sense_axes</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">fig</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sense_axes</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sense_axes</span> <span class="o">=</span> <span class="n">sense_axes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">labels</span> <span class="o">=</span> <span class="n">labels</span>
        <span class="n">lvm</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">vals</span><span class="p">,</span><span class="n">model</span><span class="p">,</span><span class="n">data_visualize</span><span class="p">,</span><span class="n">latent_axes</span><span class="p">,</span><span class="n">sense_axes</span><span class="p">,</span><span class="n">latent_index</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_sensitivities</span><span class="p">()</span>
        <span class="k">print</span> <span class="bp">self</span><span class="o">.</span><span class="n">latent_values</span>
        <span class="k">print</span> <span class="s">&quot;use left and right mouse buttons to select dimensions&quot;</span>


<div class="viewcode-block" id="lvm_dimselect.on_click"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.lvm_dimselect.on_click">[docs]</a>    <span class="k">def</span> <span class="nf">on_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span><span class="o">==</span><span class="bp">self</span><span class="o">.</span><span class="n">sense_axes</span><span class="p">:</span>
            <span class="n">new_index</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">min</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)),</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">input_dim</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c"># Make it red if and y-axis (red=port=left) if it is a left button click</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">latent_index</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_index</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c"># Make it green and x-axis (green=starboard=right) if it is a right button click</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">latent_index</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_index</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">show_sensitivities</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">latent_axes</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">plot_latent</span><span class="p">(</span><span class="n">which_indices</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">latent_index</span><span class="p">,</span>
                                   <span class="n">ax</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">latent_axes</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">labels</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">latent_handle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">latent_axes</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">0</span><span class="p">],[</span><span class="mi">0</span><span class="p">],</span><span class="s">&#39;rx&#39;</span><span class="p">,</span><span class="n">mew</span><span class="o">=</span><span class="mi">2</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">latent_values</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span><span class="o">==</span><span class="bp">self</span><span class="o">.</span><span class="n">latent_axes</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">move_on</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">move_on</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">called</span> <span class="o">=</span> <span class="bp">True</span>


</div>
<div class="viewcode-block" id="lvm_dimselect.on_leave"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.lvm_dimselect.on_leave">[docs]</a>    <span class="k">def</span> <span class="nf">on_leave</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">):</span>
        <span class="k">print</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">latent_values</span><span class="p">)</span>
        <span class="n">latent_values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">latent_values</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">latent_values</span><span class="p">[</span><span class="bp">None</span><span class="p">,:])[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_visualize</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>


</div></div>
<div class="viewcode-block" id="image_show"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.image_show">[docs]</a><span class="k">class</span> <span class="nc">image_show</span><span class="p">(</span><span class="n">matplotlib_show</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Show a data vector as an image. This visualizer rehapes the output vector and displays it as an image.</span>

<span class="sd">    :param vals: the values of the output to display.</span>
<span class="sd">    :type vals: ndarray</span>
<span class="sd">    :param axes: the axes to show the output on.</span>
<span class="sd">    :type vals: axes handle</span>
<span class="sd">    :param dimensions: the dimensions that the image needs to be transposed to for display.</span>
<span class="sd">    :type dimensions: tuple</span>
<span class="sd">    :param transpose: whether to transpose the image before display.</span>
<span class="sd">    :type bool: default is False.</span>
<span class="sd">    :param order: whether array is in Fortan ordering (&#39;F&#39;) or Python ordering (&#39;C&#39;). Default is python (&#39;C&#39;).</span>
<span class="sd">    :type order: string</span>
<span class="sd">    :param invert: whether to invert the pixels or not (default False).</span>
<span class="sd">    :type invert: bool</span>
<span class="sd">    :param palette: a palette to use for the image.</span>
<span class="sd">    :param preset_mean: the preset mean of a scaled image.</span>
<span class="sd">    :type preset_mean: double</span>
<span class="sd">    :param preset_std: the preset standard deviation of a scaled image.</span>
<span class="sd">    :type preset_std: double</span>
<span class="sd">    :param cmap: the colormap for image visualization</span>
<span class="sd">    :type cmap: matplotlib.cm&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">dimensions</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">16</span><span class="p">),</span> <span class="n">transpose</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="n">invert</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="p">[],</span> <span class="n">preset_mean</span><span class="o">=</span><span class="mf">0.</span><span class="p">,</span> <span class="n">preset_std</span><span class="o">=</span><span class="mf">1.</span><span class="p">,</span> <span class="n">select_image</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">matplotlib_show</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">,</span> <span class="n">axes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span> <span class="o">=</span> <span class="n">dimensions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span> <span class="o">=</span> <span class="n">transpose</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">order</span> <span class="o">=</span> <span class="n">order</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">invert</span> <span class="o">=</span> <span class="n">invert</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="n">scale</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">palette</span> <span class="o">=</span> <span class="n">palette</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preset_mean</span> <span class="o">=</span> <span class="n">preset_mean</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preset_std</span> <span class="o">=</span> <span class="n">preset_std</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">select_image</span> <span class="o">=</span> <span class="n">select_image</span> <span class="c"># This is used when the y vector contains multiple images concatenated.</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">palette</span> <span class="o">==</span> <span class="p">[]:</span> <span class="c"># Can just show the image (self.set_image() took care of setting the palette)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s">&#39;nearest&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">cmap</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span> <span class="c"># Use a jet map.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">jet</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s">&#39;nearest&#39;</span><span class="p">)</span> <span class="c"># @UndefinedVariable</span>
        <span class="k">else</span><span class="p">:</span> <span class="c"># Use the selected map.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s">&#39;nearest&#39;</span><span class="p">)</span> <span class="c"># @UndefinedVariable</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<div class="viewcode-block" id="image_show.modify"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.image_show.modify">[docs]</a>    <span class="k">def</span> <span class="nf">modify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_image</span><span class="p">(</span><span class="n">vals</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">handle</span><span class="o">.</span><span class="n">set_array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="image_show.set_image"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.image_show.set_image">[docs]</a>    <span class="k">def</span> <span class="nf">set_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">):</span>
        <span class="n">dim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">num_images</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">vals</span><span class="p">[</span><span class="mi">0</span><span class="p">,]</span><span class="o">.</span><span class="n">size</span><span class="o">/</span><span class="n">dim</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">num_images</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">num_images</span><span class="o">.</span><span class="n">is_integer</span><span class="p">():</span> <span class="c"># Show a mosaic of images</span>
            <span class="n">num_images</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="n">num_images</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">num_images</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">num_images</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">iR</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_images</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">iC</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_images</span><span class="p">):</span>
                    <span class="n">cur_img_id</span> <span class="o">=</span> <span class="n">iR</span><span class="o">*</span><span class="n">num_images</span> <span class="o">+</span> <span class="n">iC</span>
                    <span class="n">cur_img</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">vals</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">dim</span><span class="o">*</span><span class="n">cur_img_id</span><span class="o">+</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">dim</span><span class="p">))],</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">order</span><span class="p">)</span>
                    <span class="n">first_row</span> <span class="o">=</span> <span class="n">iR</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">last_row</span> <span class="o">=</span> <span class="p">(</span><span class="n">iR</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">first_col</span> <span class="o">=</span> <span class="n">iC</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">last_col</span> <span class="o">=</span> <span class="p">(</span><span class="n">iC</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[</span><span class="n">first_row</span><span class="p">:</span><span class="n">last_row</span><span class="p">,</span> <span class="n">first_col</span><span class="p">:</span><span class="n">last_col</span><span class="p">]</span> <span class="o">=</span> <span class="n">cur_img</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">vals</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">dim</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">select_image</span><span class="o">+</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">dim</span><span class="p">))],</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">order</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">transpose</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="o">.</span><span class="n">T</span>
        <span class="c"># if not self.scale:</span>
        <span class="c">#     self.vals = self.vals</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">invert</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vals</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span>

        <span class="c"># un-normalizing, for visualisation purposes:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">preset_std</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">preset_mean</span>
        <span class="c"># Clipping the values:</span>
        <span class="c">#self.vals[self.vals &lt; 0] = 0</span>
        <span class="c">#self.vals[self.vals &gt; 255] = 255</span>
        <span class="c">#else:</span>
            <span class="c">#self.vals = 255*(self.vals - self.vals.min())/(self.vals.max() - self.vals.min())</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">palette</span> <span class="o">==</span> <span class="p">[]:</span> <span class="c"># applying using an image palette (e.g. if the image has been quantized)</span>
            <span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vals</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">fromarray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s">&#39;uint8&#39;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="o">.</span><span class="n">putpalette</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">palette</span><span class="p">)</span> <span class="c"># palette is a list, must be loaded before calling this function</span>
</div></div>
<div class="viewcode-block" id="mocap_data_show_vpython"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.mocap_data_show_vpython">[docs]</a><span class="k">class</span> <span class="nc">mocap_data_show_vpython</span><span class="p">(</span><span class="n">vpython_show</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for visualizing motion capture data using visual module.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">,</span> <span class="n">scene</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">connect</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">0.1</span><span class="p">):</span>
        <span class="n">vpython_show</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">,</span> <span class="n">scene</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">radius</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span> <span class="o">=</span> <span class="n">connect</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">process_values</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_edges</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_vertices</span><span class="p">()</span>

<div class="viewcode-block" id="mocap_data_show_vpython.draw_vertices"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.mocap_data_show_vpython.draw_vertices">[docs]</a>    <span class="k">def</span> <span class="nf">draw_vertices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spheres</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spheres</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">visual</span><span class="o">.</span><span class="n">sphere</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">]),</span> <span class="n">radius</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">visible</span><span class="o">=</span><span class="bp">True</span>
</div>
<div class="viewcode-block" id="mocap_data_show_vpython.draw_edges"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.mocap_data_show_vpython.draw_edges">[docs]</a>    <span class="k">def</span> <span class="nf">draw_edges</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rods</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line_handle</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">J</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">J</span><span class="p">):</span>
                <span class="n">pos</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos_axis</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">rods</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">visual</span><span class="o">.</span><span class="n">cylinder</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="n">pos</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="mocap_data_show_vpython.modify_vertices"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.mocap_data_show_vpython.modify_vertices">[docs]</a>    <span class="k">def</span> <span class="nf">modify_vertices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spheres</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="mocap_data_show_vpython.modify_edges"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.mocap_data_show_vpython.modify_edges">[docs]</a>    <span class="k">def</span> <span class="nf">modify_edges</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line_handle</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">J</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">rod</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rods</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">J</span><span class="p">):</span>
                <span class="n">rod</span><span class="o">.</span><span class="n">pos</span><span class="p">,</span> <span class="n">rod</span><span class="o">.</span><span class="n">axis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos_axis</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="mocap_data_show_vpython.pos_axis"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.mocap_data_show_vpython.pos_axis">[docs]</a>    <span class="k">def</span> <span class="nf">pos_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">):</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">axis</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">pos</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="n">axis</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">pos</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
        <span class="n">axis</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
        <span class="n">pos</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
        <span class="n">axis</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">pos</span><span class="p">,</span> <span class="n">axis</span>
</div>
<div class="viewcode-block" id="mocap_data_show_vpython.modify"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.mocap_data_show_vpython.modify">[docs]</a>    <span class="k">def</span> <span class="nf">modify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vals</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">process_values</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">modify_edges</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">modify_vertices</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="mocap_data_show_vpython.process_values"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.mocap_data_show_vpython.process_values">[docs]</a>    <span class="k">def</span> <span class="nf">process_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">,</span> <span class="s">&quot;this needs to be implemented to use the data_show class&quot;</span>
</div></div>
<div class="viewcode-block" id="mocap_data_show"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.mocap_data_show">[docs]</a><span class="k">class</span> <span class="nc">mocap_data_show</span><span class="p">(</span><span class="n">matplotlib_show</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for visualizing motion capture data.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">connect</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">axes</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
            <span class="n">axes</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="s">&#39;3d&#39;</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s">&#39;equal&#39;</span><span class="p">)</span>
        <span class="n">matplotlib_show</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">,</span> <span class="n">axes</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span> <span class="o">=</span> <span class="n">connect</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">process_values</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initialize_axes</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_vertices</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">finalize_axes</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_edges</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

<div class="viewcode-block" id="mocap_data_show.draw_vertices"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.mocap_data_show.draw_vertices">[docs]</a>    <span class="k">def</span> <span class="nf">draw_vertices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">points_handle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="mocap_data_show.draw_edges"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.mocap_data_show.draw_edges">[docs]</a>    <span class="k">def</span> <span class="nf">draw_edges</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line_handle</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">y</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">z</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">J</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">I</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">J</span><span class="p">):</span>
                <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
                <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
                <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">NaN</span><span class="p">)</span>
                <span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
                <span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
                <span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">NaN</span><span class="p">)</span>
                <span class="n">z</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
                <span class="n">z</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
                <span class="n">z</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">NaN</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line_handle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">z</span><span class="p">),</span> <span class="s">&#39;b-&#39;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="mocap_data_show.modify"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.mocap_data_show.modify">[docs]</a>    <span class="k">def</span> <span class="nf">modify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vals</span> <span class="o">=</span> <span class="n">vals</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">process_values</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initialize_axes_modify</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_vertices</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initialize_axes</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">finalize_axes_modify</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_edges</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="mocap_data_show.process_values"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.mocap_data_show.process_values">[docs]</a>    <span class="k">def</span> <span class="nf">process_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">,</span> <span class="s">&quot;this needs to be implemented to use the data_show class&quot;</span>
</div>
<div class="viewcode-block" id="mocap_data_show.initialize_axes"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.mocap_data_show.initialize_axes">[docs]</a>    <span class="k">def</span> <span class="nf">initialize_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">boundary</span><span class="o">=</span><span class="mf">0.05</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set up the axes with the right limits and scaling.&quot;&quot;&quot;</span>
        <span class="n">bs</span> <span class="o">=</span> <span class="p">[(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[:,</span> <span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[:,</span> <span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">())</span><span class="o">*</span><span class="n">boundary</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x_lim</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">-</span><span class="n">bs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">+</span><span class="n">bs</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y_lim</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">-</span><span class="n">bs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">+</span><span class="n">bs</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">z_lim</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">-</span><span class="n">bs</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">+</span><span class="n">bs</span><span class="p">[</span><span class="mi">2</span><span class="p">]])</span>
</div>
<div class="viewcode-block" id="mocap_data_show.initialize_axes_modify"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.mocap_data_show.initialize_axes_modify">[docs]</a>    <span class="k">def</span> <span class="nf">initialize_axes_modify</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">points_handle</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line_handle</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="mocap_data_show.finalize_axes"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.mocap_data_show.finalize_axes">[docs]</a>    <span class="k">def</span> <span class="nf">finalize_axes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x_lim</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y_lim</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">set_zlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">z_lim</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">auto_scale_xyz</span><span class="p">([</span><span class="o">-</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">])</span>

<span class="c">#        self.axes.set_aspect(&#39;equal&#39;)</span>
<span class="c">#         self.axes.autoscale(enable=False)</span>
</div>
<div class="viewcode-block" id="mocap_data_show.finalize_axes_modify"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.mocap_data_show.finalize_axes_modify">[docs]</a>    <span class="k">def</span> <span class="nf">finalize_axes_modify</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x_lim</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y_lim</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">set_zlim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">z_lim</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="stick_show"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.stick_show">[docs]</a><span class="k">class</span> <span class="nc">stick_show</span><span class="p">(</span><span class="n">mocap_data_show</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Show a three dimensional point cloud as a figure. Connect elements of the figure together using the matrix connect.&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">,</span> <span class="n">connect</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vals</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">vals</span> <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="bp">None</span><span class="p">,:]</span>
        <span class="n">mocap_data_show</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="n">axes</span><span class="p">,</span> <span class="n">connect</span><span class="o">=</span><span class="n">connect</span><span class="p">)</span>

<div class="viewcode-block" id="stick_show.process_values"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.stick_show.process_values">[docs]</a>    <span class="k">def</span> <span class="nf">process_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="mi">3</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
</div></div>
<div class="viewcode-block" id="skeleton_show"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.skeleton_show">[docs]</a><span class="k">class</span> <span class="nc">skeleton_show</span><span class="p">(</span><span class="n">mocap_data_show</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;data_show class for visualizing motion capture data encoded as a skeleton with angles.&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">,</span> <span class="n">skel</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;data_show class for visualizing motion capture data encoded as a skeleton with angles.</span>
<span class="sd">        :param vals: set of modeled angles to use for printing in the axis when it&#39;s first created.</span>
<span class="sd">        :type vals: np.array</span>
<span class="sd">        :param skel: skeleton object that has the parameters of the motion capture skeleton associated with it.</span>
<span class="sd">        :type skel: mocap.skeleton object</span>
<span class="sd">        :param padding:</span>
<span class="sd">        :type int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">skel</span> <span class="o">=</span> <span class="n">skel</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">padding</span> <span class="o">=</span> <span class="n">padding</span>
        <span class="n">connect</span> <span class="o">=</span> <span class="n">skel</span><span class="o">.</span><span class="n">connection_matrix</span><span class="p">()</span>
        <span class="n">mocap_data_show</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vals</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="n">axes</span><span class="p">,</span> <span class="n">connect</span><span class="o">=</span><span class="n">connect</span><span class="p">)</span>
<div class="viewcode-block" id="skeleton_show.process_values"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.skeleton_show.process_values">[docs]</a>    <span class="k">def</span> <span class="nf">process_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Takes a set of angles and converts them to the x,y,z coordinates in the internal prepresentation of the class, ready for plotting.</span>

<span class="sd">        :param vals: the values that are being modelled.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">padding</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="n">channels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">padding</span><span class="p">))</span>
            <span class="n">channels</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">channels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vals</span>
        <span class="n">vals_mat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">skel</span><span class="o">.</span><span class="n">to_xyz</span><span class="p">(</span><span class="n">channels</span><span class="o">.</span><span class="n">flatten</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">vals_mat</span><span class="p">)</span>
        <span class="c"># Flip the Y and Z axes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">vals_mat</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">vals_mat</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">vals_mat</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="skeleton_show.wrap_around"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.skeleton_show.wrap_around">[docs]</a>    <span class="k">def</span> <span class="nf">wrap_around</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lim</span><span class="p">,</span> <span class="n">connect</span><span class="p">):</span>
        <span class="n">quot</span> <span class="o">=</span> <span class="n">lim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">lim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vals</span> <span class="o">=</span> <span class="n">rem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="p">,</span> <span class="n">quot</span><span class="p">)</span><span class="o">+</span><span class="n">lim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">nVals</span> <span class="o">=</span> <span class="n">floor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vals</span><span class="o">/</span><span class="n">quot</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">connect</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">find</span><span class="p">(</span><span class="n">connect</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:]):</span>
                <span class="k">if</span> <span class="n">nVals</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="n">nVals</span><span class="p">[</span><span class="n">j</span><span class="p">]:</span>
                    <span class="n">connect</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">return</span> <span class="n">connect</span>

</div></div>
<div class="viewcode-block" id="data_play"><a class="viewcode-back" href="../../../../GPy.plotting.matplot_dep.html#GPy.plotting.matplot_dep.visualize.data_play">[docs]</a><span class="k">def</span> <span class="nf">data_play</span><span class="p">(</span><span class="n">Y</span><span class="p">,</span> <span class="n">visualizer</span><span class="p">,</span> <span class="n">frame_rate</span><span class="o">=</span><span class="mi">30</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Play a data set using the data_show object given.</span>

<span class="sd">    :Y: the data set to be visualized.</span>
<span class="sd">    :param visualizer: the data show objectwhether to display during optimisation</span>
<span class="sd">    :type visualizer: data_show</span>

<span class="sd">    Example usage:</span>

<span class="sd">    This example loads in the CMU mocap database (http://mocap.cs.cmu.edu) subject number 35 motion number 01. It then plays it using the mocap_show visualize object.</span>

<span class="sd">    .. code-block:: python</span>

<span class="sd">       data = GPy.util.datasets.cmu_mocap(subject=&#39;35&#39;, train_motions=[&#39;01&#39;])</span>
<span class="sd">       Y = data[&#39;Y&#39;]</span>
<span class="sd">       Y[:, 0:3] = 0.   # Make figure walk in place</span>
<span class="sd">       visualize = GPy.util.visualize.skeleton_show(Y[0, :], data[&#39;skel&#39;])</span>
<span class="sd">       GPy.util.visualize.data_play(Y, visualize)</span>

<span class="sd">    &quot;&quot;&quot;</span>


    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">Y</span><span class="p">:</span>
        <span class="n">visualizer</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span><span class="n">y</span><span class="p">[</span><span class="bp">None</span><span class="p">,</span> <span class="p">:])</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1.</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">frame_rate</span><span class="p">))</span></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">GPy  documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../../../index.html" >Module code</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="../../../GPy.html" >GPy</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2013, Author.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>